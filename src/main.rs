/*
 *                        COLUMNS
 *
 *           0   1   2   3   4   5   6   7   8                BOXES
 *  LINES
 *         ╔═══╤═══╤═══╦═══╤═══╤═══╦═══╤═══╤═══╗
 *    0    ║ 0 │ 1 │ 2 ║ 3 │ 4 │ 5 ║ 6 │ 7 │ 8 ║     ╔═════╗ ╔═════╗ ╔═════╗
 *         ╟───┼───┼───╫───┼───┼───╫───┼───┼───╢     ║     ║ ║     ║ ║     ║
 *    1    ║ 9 │ 10│ 11║ 12│ 13│ 14║ 15│ 16│ 17║     ║  0  ║ ║  1  ║ ║  2  ║
 *         ╟───┼───┼───╫───┼───┼───╫───┼───┼───╢     ║     ║ ║     ║ ║     ║
 *    2    ║ 18│ 19│ 20║ 21│ 22│ 23║ 24│ 25│ 26║     ╚═════╝ ╚═════╝ ╚═════╝
 *         ╠═══╪═══╪═══╬═══╪═══╪═══╬═══╪═══╪═══╣
 *    3    ║ 27│ 28│ 29║ 30│ 31│ 32║ 33│ 34│ 35║     ╔═════╗ ╔═════╗ ╔═════╗
 *         ╟───┼───┼───╫───┼───┼───╫───┼───┼───╢     ║     ║ ║     ║ ║     ║
 *    4    ║ 36│ 37│ 38║ 39│ 40│ 41║ 42│ 43│ 44║     ║  3  ║ ║  4  ║ ║  5  ║
 *         ╟───┼───┼───╫───┼───┼───╫───┼───┼───╢     ║     ║ ║     ║ ║     ║
 *    5    ║ 45│ 46│ 47║ 48│ 49│ 50║ 51│ 52│ 53║     ╚═════╝ ╚═════╝ ╚═════╝
 *         ╠═══╪═══╪═══╬═══╪═══╪═══╬═══╪═══╪═══╣
 *    6    ║ 54│ 55│ 56║ 57│ 58│ 59║ 60│ 61│ 62║     ╔═════╗ ╔═════╗ ╔═════╗
 *         ╟───┼───┼───╫───┼───┼───╫───┼───┼───╢     ║     ║ ║     ║ ║     ║
 *    7    ║ 63│ 64│ 65║ 66│ 67│ 68║ 69│ 70│ 71║     ║  6  ║ ║  7  ║ ║  8  ║
 *         ╟───┼───┼───╫───┼───┼───╫───┼───┼───╢     ║     ║ ║     ║ ║     ║
 *    8    ║ 72│ 73│ 74║ 75│ 76│ 77║ 78│ 79│ 80║     ╚═════╝ ╚═════╝ ╚═════╝
 *         ╚═══╧═══╧═══╩═══╧═══╧═══╩═══╧═══╧═══╝
 *
 */

use clap::Parser;
use singlenum::args::Args;
use singlenum::astructs::table;
use std::fs::File;
use std::io::BufReader;

fn main() {
    env_logger::init();
    let args: Args = Args::parse();

    if !args.file.exists() {
        println!("File: {:?} does not exist!", args.file);
    }

    let file = File::open(args.file).unwrap();
    let reader = BufReader::new(file);
    let puzzle: Vec<usize> = serde_json::from_reader(reader).unwrap();

    let mut table = table::Table::new(puzzle, args.attempts);
    table.solve().unwrap();
    table.draw();
}
